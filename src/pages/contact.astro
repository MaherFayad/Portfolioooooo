---
import ContactForm from '../components/contact/ContactForm.astro';
import ContactInfo from '../components/contact/ContactInfo.astro';
import {ContactUs} from '../components/emailjs/emailjs.jsx';
import Layout from '../layouts/Layout.astro';
---

<Layout
  description="Contact Me team to learn more about how I can help you."
  title="Contact Â· Maher Fayad"
>
  <ContactInfo />
  <ContactUs />
  <script>
      import emailjs from 'emailjs-com';

      // Add event listener to reinitialize on window resize (optional)

      const redirectToThanks = () => {
        window.location.href = '/thanks';
      };

      const redirectTo404 = () => {
        window.location.href = '/404';
      };

      document.addEventListener("DOMContentLoaded", function() {
        const form = document.getElementById("Form") as HTMLFormElement; // Explicitly type as HTMLFormElement

        if (form) {
          form.addEventListener("submit", function(e) {
            e.preventDefault(); // Prevent the form from submitting traditionally
            emailjs
              .sendForm('service_lwri32l', 'template_hnydtuc', form, 'EX_A9-j_JtnnH7oPd')
              .then(
                (result) => {
                  console.log(result.text);
                  redirectToThanks();
                },
                (error) => {
                  console.log(error.text);
                  redirectTo404();
                }
              );
          });
        }
      });
  </script>
</Layout>
